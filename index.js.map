{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function markup(data, isNewSearch) {\n    let { hits } = data;\n    const box = document.querySelector('.gallery');\n\n    if(!hits || hits.length === 0) {\n        iziToast.show({\n            messageColor: \"#fafafb\",\n            messageSize: '16px',\n            backgroundColor: '#ef4040',\n            transitionIn: 'bounceInLeft',\n            position: 'topRight',\n            closeOnClick: true,\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n        });\n        box.innerHTML = '';\n        return;\n    }\n    const markup = hits.map(image => \n            ` <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"gallery-div\">\n                <p>Likes</p>\n                <p>Views</p>\n                <p>Comments</p>\n                <p>Downloads</p>\n                <span>${image.likes}</span>\n                <span>${image.views}</span>\n                <span>${image.comments}</span>\n                <span>${image.downloads}</span>\n            </div>\n        </a>\n    </li>`).join(' ');\n\n    if(isNewSearch) {\n        box.innerHTML = markup;\n    } else {\n        box.insertAdjacentHTML('beforeend', markup);\n    }\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n\n    const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({top: cardHeight * 2, behavior: 'smooth'});\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { markup } from \"./render-functions\";\n\nconst API_KEY = '49077241-9df32fcc53d001f958141ccb6';\nconst PER_PAGE = 40;\nlet currentPage = 1;\nlet currentQuery = '';\n\nexport async function getImage(input, isNewSearch = false) {\n    const box = document.querySelector('.gallery');\n    const loadMoreBtn = document.querySelector('.load-more');\n\n    if(isNewSearch) {\n        currentPage = 1;\n        currentQuery = input;\n        box.innerHTML = '';\n    }\n\n    const query = encodeURIComponent(currentQuery);\n    const urlParams = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: PER_PAGE,\n    });\n\n    const URL = `https://pixabay.com/api/?${urlParams}`;\n\n    try{\n        const response = await axios.get(URL);\n        const data = response.data;\n\n        if(data.hits.length === 0) {\n            throw new Error('No images found');\n        }\n\n        markup(data, isNewSearch);\n        currentPage++;\n\n        if(currentPage * PER_PAGE >= data.totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            iziToast.show({\n                messageColor: \"#fafafb\",\n            messageSize: '16px',\n            backgroundColor: '#ef4040',\n            transitionIn: 'bounceInLeft',\n            position: 'topRight',\n            closeOnClick: true,\n            message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        } else {\n            loadMoreBtn.classList.remove('hidden');\n        }\n    } catch(error) {\n        console.error(error);\n        box.innerHTML = '';\n        iziToast.show({\n                        messageColor: \"#fafafb\",\n                        messageSize: '16px',\n                        backgroundColor: '#ef4040',\n                        transitionIn: 'bounceInLeft',\n                        position: 'topRight',\n                        closeOnClick: true,\n                        message: 'Sorry, an error happened. Try again',\n                    });\n    }\n}\n\n\n//     return fetch(URL)\n//     .then(response => {\n//         if(!response.ok) {\n//             throw new Error(`HTTP error! Status: ${response.status}`);\n//         }\n//         return response.json();\n//     })\n//     .then(data => {\n//         return markup(data);\n//     })\n//     .catch(error => {\n//         console.error(error);\n//         box.innerHTML = '';\n//         iziToast.show({\n//             messageColor: \"#fafafb\",\n//             messageSize: '16px',\n//             backgroundColor: 'background: #ef4040',\n//             transitionIn: 'bounceInLeft',\n//             position: 'topRight',\n//             closeOnClick: true,\n//             message: 'Sorry, an error happened. Try again',\n//         });\n//         return;\n//     });\n// }","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {getImage} from './js/pixabay-api'\n\nconst form = document.querySelector('.input-list');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst inputField = document.querySelector(\".input\");\n\nlet currentQuery = '';\nlet currentPage = 1;\n\nloadMoreBtn.classList.add('hidden');\n\nform.addEventListener('submit', async(event) => {\n    event.preventDefault();\n\n    currentQuery = inputField.value.trim();\n    if(!currentQuery) {\n        iziToast.show({\n            messageColor: \"#fafafb\",\n            messageSize: '16px',\n            backgroundColor: '#ef4040',\n            transitionIn: 'bounceInLeft',\n            position: 'topRight',\n            closeOnClick: true,\n            message: 'Please enter the search query',\n        });\n        return;\n    }\n    currentPage = 1;\n    loadMoreBtn.classList.add('hidden');\n    await getImage(currentQuery, true)\n});\n\nloadMoreBtn.addEventListener('click', async() => {\n    currentPage +=1;\n    await getImage(currentQuery, false);\n});\n    \n// document.querySelector('.input-list').addEventListener('submit', event => {\n//     const input = document.querySelector('.input').value.trim();\n//     const box = document.querySelector('.gallery');\n//     event.preventDefault();\n\n//     if(!input) {\n//         iziToast.show({\n//             messageColor: \"#fafafb\",\n//             messageSize: '16px',\n//             backgroundColor: 'background: #ef4040',\n//             transitionIn: 'bounceInLeft',\n//             position: 'topRight',\n//             closeOnClick: true,\n//             message: 'Please enter the search query',\n//         });\n//         return;\n//     }\n//     box.innerHTML = '<p>Wait, the image is loaded</p><span class = \"loader\"></span>'\n//     getImage(input);\n// })"],"names":["markup","data","isNewSearch","hits","box","iziToast","image","SimpleLightbox","cardHeight","API_KEY","PER_PAGE","currentPage","currentQuery","getImage","input","loadMoreBtn","query","URL","axios","error","form","inputField","event"],"mappings":"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"}